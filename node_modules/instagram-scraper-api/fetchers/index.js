"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.fetchUser = void 0;
const cross_fetch_1 = __importDefault(require("cross-fetch"));
const vars_1 = require("../vars");
const USER_AGENTS = [
    'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36',
    'Mozilla/5.0 (iPhone; CPU iPhone OS 14_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/87.0.4280.77 Mobile/15E148 Safari/604.1',
    'Mozilla/5.0 (Linux; Android 10; SM-A205U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.101 Mobile Safari/537.36',
    'Mozilla/5.0 (Linux; Android 10) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.101 Mobile Safari/537.36'
];
const headers = {
    'User-Agent': USER_AGENTS[Math.floor(Math.random() * USER_AGENTS.length)]
};
const fetchUser = async (user) => {
    const url = (0, vars_1.userUrl)(user);
    try {
        const response = await (0, cross_fetch_1.default)(url, { headers });
        if (response.status >= 400 && response.status < 600) {
            throw new Error(`instagram-api: Bad response ${response.status} for url: ${url}`);
        }
        return await response.text();
    }
    catch (e) {
        console.error(e);
        return 'Error';
    }
};
exports.fetchUser = fetchUser;
